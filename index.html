<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
  <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
  <script src="flot/jquery.flot.js"></script>
  <script src="flot/jquery.flot.time.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="nsc.js"></script>
  <link rel="stylesheet" type="text/css" href="nsc.css">
  
  <script>
	
	$(function() {
	
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();
    
		var availableIdTags = [
            "restart_map",
			"reset_counter",
			"flush_water_reward",
			"issue_reward"
        ];
		var availableTargetTags = [
            "level_restart",
			"player_x",
			"player_y",
			"player_left_click",
			"player_right_click",
			"teleport",
			"player_angle",
			"distance_traveled",
			"trial_start",
			"correct_trial",
			"incorrect_trial",
			"reward_issued"
        ];
        $( "#id-tags" ).autocomplete({
            source: availableIdTags
        }, function() {setTimeout(function() {
					var obj = { id: $("#id-tags").val(), target: $("#target-tags").val() };
					$("#command").text(JSON.stringify(obj));
				}, 50);});
				
		$( "#target-tags" ).autocomplete({
            source: availableTargetTags
        });
		
		setInterval(function() { 
			var obj = { id: $("#id-tags").val(), target: $("#target-tags").val() };
				$("#command").text(JSON.stringify(obj));
			}, 100);
		
	
        $( "input[type=submit]" )
            .button()
            .click(function( event ) {
                event.preventDefault();
				var obj = { id: $("#id-tags").val(), target: $("#target-tags").val() };
				$("#command").text(JSON.stringify(obj));
				socket.emit('command', obj);
	            
            });
		
		$( "#accordion" ).accordion({
            heightStyle: "fill"
        });
        $( "#accordion-resizer" ).resizable({
            minHeight: 800,
            minWidth: 200,
            resize: function() {
                $( "#accordion" ).accordion( "refresh" );
            }
        });

	
        $( "button" ).button();
    });
	
  </script>
</head>
<body>
<h3> Neuro-Sand-Cube-Console </h3>

<div id="accordion-resizer" class="ui-widget-content">
	<div id="accordion">
		<h3>Stats</h3>
		<div id = "stats">
			<h4 id = "connection"> Disconnected </h4>
			<p>
			<table id="stats-table"><thead><tr><th>state</th><th>change_count</th><th>time</th><th>frame</th><th>value</th></tr></thead><tbody></tbody></table>
			</p>
		</div>
		<h3>Graphs</h3>
		<div id = "graph-container">
			<ul id = "graphs" class = "sortable"></ul>
		</div>
		<h3>Log</h3>
		<div id="console">
			<p/>
		</div>
	</div>
</div>
 
 <p><p>
<div class="parent">
	<div class="ui-widget" id="inputboxes">
		<label for="id-tags">Id: </label>
		<input id="id-tags" />
		<label for="target-tags">Target: </label>
		<input id="target-tags" />
		<input type="submit" value="Send command" />
		<p><p>
		<label id="command"> </label>
		<form action="/log" method="get">
		<button name="log" type="submit">Log file</button>
		</form>
		<div style="height:10px"></div>
	</div>
</div>
</body>
</html>
